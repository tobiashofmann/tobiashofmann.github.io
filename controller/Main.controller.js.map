{"version":3,"file":"Main.controller.js","names":["BaseController","_interopRequireDefault","__BaseController","formatter","__formatter","models","__models","buzzword","__buzzword","Main","extend","constructor","prototype","apply","arguments","onInit","_onInit","model","createViewModel","setModel","prepareLayout","buzzwordsModel","getOwnerComponent","getModel","dataLoaded","then","pickBuzzwords","catch","console","log","_prepareLayout","rows","getProperty","columns","elements","calcColumns","navToLegalDisclosure","_navToLegalDisclosure","urlImpressum","library","URLHelper","redirect","navToLicense","_navToLicense","urlIcense","onLegalInfoPress","_onLegalInfoPress","event","oView","getView","source","getSource","_legalInfoPopover","Fragment","load","id","getId","name","controller","oLegalPopover","addDependent","openBy","infoPopover","isOpen","close","_calcColumns","columnsWidth","Math","floor","cssLayoutcolumns","i","toString","setProperty","onTilePress","_onTilePress","toggleStyleClass","_pickBuzzwords","length","selectedWords","JSONModel","doReloadBuzzowrds","_doReloadBuzzowrds","loadData","resetTileState","_resetTileState","grid","byId","items","getItems","removeStyleClass"],"sources":["Main.controller.ts"],"sourcesContent":["import BaseController from \"./BaseController\";\nimport formatter from \"../model/formatter\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport models from \"../model/models\";\nimport buzzword from \"../model/buzzword\";\nimport Event from \"sap/ui/base/Event\";\nimport GenericTile from \"sap/m/GenericTile\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport * as library from \"sap/m/library\";\nimport CSSGrid from \"sap/ui/layout/cssgrid/CSSGrid\";\n\n/**\n * @namespace de.itsfullofstars.bingo.bingo.controller\n */\nexport default class Main extends BaseController {\n\tprivate formatter = formatter;\n\tprivate elements: int;\n\tprivate model: JSONModel;\n\tprivate buzzwordsModel: JSONModel;\n\t//private _legalInfoPopover: ActionSheet;\n\n\t\n\tpublic onInit() : void {\n\n\t\t// view model\n\t\tthis.model = models.createViewModel();\n\t\tthis.setModel(this.model, \"mainView\");\n\n\t\tthis.prepareLayout();\n\t\t\n\t\t// buzzowrd model. loaded from the \"internet\"\n\t\tthis.buzzwordsModel = this.getOwnerComponent().getModel() as JSONModel;\n\t\tthis.buzzwordsModel.dataLoaded()\n\t\t.then( () => {\n\t\t\tthis.pickBuzzwords();\n\t\t})\n\t\t.catch( () => console.log(\"error\"));\n\t\t\n\t}\n\n\tprivate prepareLayout() {\n\t\tconst rows: int = this.model.getProperty(\"/rows\") as int;\n\t\tconst columns: int = this.model.getProperty(\"/columns\") as int;\n\t\tthis.elements = rows * columns;\n\t\t\n\t\tthis.calcColumns(columns);\n\t}\n\n\tpublic navToLegalDisclosure(): void {\n\t\tconst urlImpressum = \"https://www.itsfullofstars.de/Impressum\";\n\t\tlibrary.URLHelper.redirect(urlImpressum, true);\n\t}\n\n\tpublic navToLicense(): void {\n\t\tconst urlIcense = \"/LICENSE\";\n\t\tlibrary.URLHelper.redirect(urlIcense, true);\n\t}\n\n\tpublic onLegalInfoPress(event: Event): void {\n\t\tconst oView = this.getView();\n\t\tconst source = event.getSource();\n\t\t// eslint-disable-next-line @typescript-eslint/no-misused-promises\n\t\tif (!this._legalInfoPopover) {\n\t\t\tthis._legalInfoPopover = Fragment.load({\n\t\t\t\tid:\toView.getId(),\n\t\t\t\tname: \"de.itsfullofstars.bingo.bingo.view.fragments.LegalInfo\",\n\t\t\t\tcontroller: this\n\t\t\t}).then(function (oLegalPopover){\n                oView.addDependent(oLegalPopover);\n\t\t\t\toLegalPopover.openBy(source);\n                return oLegalPopover;\n            });\n\t\t} else {\n\t\t\tthis._legalInfoPopover\n\t\t\t.then( (infoPopover) => {\n\t\t\t\tif (infoPopover.isOpen()) {\n\t\t\t\t\tinfoPopover.close();\n\t\t\t\t} else {\n\t\t\t\t\tinfoPopover.openBy(source);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t}\n\n\t\n\tprivate calcColumns(columns: int): void {\n\t\tconst columnsWidth:number = Math.floor(100 / columns);\n\t\tlet cssLayoutcolumns = \"\";\n\t\tfor (let i = 0; i < columns; i++) {\n\t\t\tcssLayoutcolumns += columnsWidth.toString() + \"% \";\n\t\t}\n\t\t\n\t\tconst model = this.getModel(\"mainView\") as JSONModel;\n\t\tmodel.setProperty(\"/columnLayout\", cssLayoutcolumns);\n\t}\n\t\n\tpublic onTilePress(event: Event): void {\n\t\tconst source:GenericTile = event.getSource() as GenericTile;\n\t\t//source.setState(\"Disabled\");\n\t\tsource.toggleStyleClass(\"bingoCardSelected\");\n\t}\n\n\tprivate pickBuzzwords(): void {\n\t\tconsole.log(\"pickBuzzwords\");\n\t\tif (this.elements <= this.buzzwordsModel.getProperty(\"/\").length) {\n\t\t\tlet selectedWords:string[] = [];\n\n\t\t\tselectedWords = buzzword.pickBuzzwords(this.buzzwordsModel, this.elements);\n\t\t\tconsole.log(selectedWords);\n\t\t\t\n\t\t\tthis.setModel(new JSONModel(selectedWords), \"bingo\");\n\t\t}\n\t\t\n\t}\n\n\tpublic doReloadBuzzowrds(): void {\n\t\t// buzzowrd model. loaded from the \"internet\"\n\t\tthis.buzzwordsModel = new JSONModel();\n\t\tthis.buzzwordsModel.loadData(\"./model/buzzwords.json\");\n\t\tthis.buzzwordsModel.dataLoaded()\n\t\t.then( () => {\n\t\t\tthis.pickBuzzwords();\n\t\t})\n\t\t.catch( () => console.log(\"error\"));\t\n\t\t\n\t\tthis.resetTileState();\n\t}\n\n\tprivate resetTileState(): void {\n\t\tconst grid = this.byId(\"bingoCardGrid\") as CSSGrid;\n\t\tconst items = grid.getItems();\n\n\t\tfor (let i=0; i< items.length; i++) {\n\t\t\titems[i].removeStyleClass(\"bingoCardSelected\");\n\t\t}\n\n\t}\n\n}\n\n"],"mappings":"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"}